name: notepadqq
buildsystem: qmake
config-opts:
  - QMAKE_STRIP=
  - DEFINES+=USE_DBUS
  - LRELEASE=lrelease
build-options:
  env:
    QMAKEPATH: "/app/lib"
sources:
  # Source0
  - type: git
    url: https://github.com/notepadqq/notepadqq.git
    commit: e6e1ac37913cb3014f7b5c5adae4c6380114d6ad
  # Patch0
  - type: patch
    path: notepadqq-qtwebengine-xdg.patch
post-install:
  # create symlink
  - echo 'create symlink';
    ln -sf "${FLATPAK_DEST}/lib/notepadqq/notepadqq-bin" "${FLATPAK_DEST}/bin/notepadqq";
  # install docs
  - echo 'install docs';
    install -p -D -m 0644 *.md -t "${FLATPAK_DEST}/share/doc/notepadqq/";
  # install licenses
  - echo 'install licenses';
    install -p -D -m 0644 "COPYING" -t "${FLATPAK_DEST}/share/licenses/notepadqq/";
modules:
  - uchardet.yaml
  - fonts.yaml
